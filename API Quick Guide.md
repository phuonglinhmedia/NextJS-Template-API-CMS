# üöÄ H∆∞·ªõng d·∫´n t√≠ch h·ª£p API cho Kh√°ch h√†ng

## üìã **Th√¥ng tin API**

| Th√¥ng tin | Chi ti·∫øt |
|-----------|----------|
| **Base URL** | `https://cms-one-mauve.vercel.app/api/v1` |
| **Protocol** | HTTP/1.1 REST API |
| **Authentication** | API Key |
| **Data Format** | JSON |
| **Content-Type** | `application/json` |

---

## ‚úÖ **X√°c th·ª±c API Key**

### **L·∫•y API Key:**
1. ƒêƒÉng nh·∫≠p v√†o dashboard c·ªßa b·∫°n
2. V√†o ph·∫ßn **API Keys**
3. T·∫°o API Key m·ªõi
4. Copy API Key (d·∫°ng: `pk_live_xxxxx...`)

### **S·ª≠ d·ª•ng API Key trong request:**

**‚úÖ C√°ch 1: X-Api-Key Header (Khuy·∫øn ngh·ªã)**
```http
X-Api-Key: your_api_key_here
Content-Type: application/json
```

**‚úÖ C√°ch 2: Authorization Bearer**
```http
Authorization: Bearer your_api_key_here
Content-Type: application/json
```

---

## üì° **Endpoints c√≥ s·∫µn**

### **üìÑ Posts (B√†i vi·∫øt)**
| Method | Endpoint | M√¥ t·∫£ |
|--------|----------|-------|
| `GET` | `/posts` | L·∫•y danh s√°ch b√†i vi·∫øt |
| `POST` | `/posts` | T·∫°o b√†i vi·∫øt m·ªõi |
| `GET` | `/posts/{id}` | L·∫•y b√†i vi·∫øt theo ID |
| `PUT` | `/posts/{id}` | C·∫≠p nh·∫≠t b√†i vi·∫øt |
| `DELETE` | `/posts/{id}` | X√≥a b√†i vi·∫øt |

### **üè∑Ô∏è Tags (Th·∫ª)**
| Method | Endpoint | M√¥ t·∫£ |
|--------|----------|-------|
| `GET` | `/tags` | L·∫•y danh s√°ch th·∫ª |
| `POST` | `/tags` | T·∫°o th·∫ª m·ªõi |

### **üìÇ Categories (Danh m·ª•c)**
| Method | Endpoint | M√¥ t·∫£ |
|--------|----------|-------|
| `GET` | `/categories` | L·∫•y danh s√°ch danh m·ª•c |
| `POST` | `/categories` | T·∫°o danh m·ª•c m·ªõi |

### **üñºÔ∏è Media (T·ªáp media)**
| Method | Endpoint | M√¥ t·∫£ |
|--------|----------|-------|
| `GET` | `/media` | L·∫•y danh s√°ch media |
| `POST` | `/media` | Upload t·ªáp media |

### **üìä Analytics (Th·ªëng k√™)**
| Method | Endpoint | M√¥ t·∫£ |
|--------|----------|-------|
| `GET` | `/analytics` | L·∫•y b√°o c√°o th·ªëng k√™ |
| `POST` | `/analytics` | Ghi nh·∫≠n l∆∞·ª£t xem |

---

## üíª **V√≠ d·ª• theo ng√¥n ng·ªØ l·∫≠p tr√¨nh**

### **üåê JavaScript/TypeScript**

**C√†i ƒë·∫∑t:** Kh√¥ng c·∫ßn th∆∞ vi·ªán b·ªï sung (s·ª≠ d·ª•ng fetch c√≥ s·∫µn)

```javascript
class CMSClient {
  constructor(apiKey, baseUrl = 'https://cms-one-mauve.vercel.app/api/v1') {
    this.apiKey = apiKey;
    this.baseUrl = baseUrl;
  }

  async request(endpoint, options = {}) {
    const url = `${this.baseUrl}${endpoint}`;
    const config = {
      headers: {
        'X-Api-Key': this.apiKey,
        'Content-Type': 'application/json',
        ...options.headers
      },
      ...options
    };

    if (options.body && typeof options.body === 'object') {
      config.body = JSON.stringify(options.body);
    }

    const response = await fetch(url, config);
    const data = await response.json();

    if (!response.ok) {
      throw new Error(data.error || `HTTP ${response.status}`);
    }

    return data;
  }

  // L·∫•y danh s√°ch b√†i vi·∫øt
  async getPosts(params = {}) {
    const query = new URLSearchParams(params).toString();
    const endpoint = query ? `/posts?${query}` : '/posts';
    return this.request(endpoint);
  }

  // T·∫°o b√†i vi·∫øt m·ªõi
  async createPost(postData) {
    return this.request('/posts', {
      method: 'POST',
      body: postData
    });
  }

  // L·∫•y b√†i vi·∫øt theo ID
  async getPost(id) {
    return this.request(`/posts/${id}`);
  }

  // C·∫≠p nh·∫≠t b√†i vi·∫øt
  async updatePost(id, postData) {
    return this.request(`/posts/${id}`, {
      method: 'PUT',
      body: postData
    });
  }

  // X√≥a b√†i vi·∫øt
  async deletePost(id) {
    return this.request(`/posts/${id}`, {
      method: 'DELETE'
    });
  }

  // L·∫•y danh s√°ch tags
  async getTags() {
    return this.request('/tags');
  }

  // T·∫°o tag m·ªõi
  async createTag(tagData) {
    return this.request('/tags', {
      method: 'POST',
      body: tagData
    });
  }

  // L·∫•y analytics
  async getAnalytics(days = 30) {
    return this.request(`/analytics?days=${days}`);
  }
}

// S·ª≠ d·ª•ng
const client = new CMSClient('your_api_key_here');

// V√≠ d·ª• s·ª≠ d·ª•ng
async function example() {
  try {
    // L·∫•y danh s√°ch b√†i vi·∫øt
    const posts = await client.getPosts({ status: 'published', limit: 10 });
    console.log(`T√¨m th·∫•y ${posts.total} b√†i vi·∫øt:`, posts.data);

    // T·∫°o b√†i vi·∫øt m·ªõi
    const newPost = await client.createPost({
      title: 'B√†i vi·∫øt m·ªõi',
      content: 'N·ªôi dung b√†i vi·∫øt...',
      status: 'published'
    });
    console.log('B√†i vi·∫øt ƒë√£ t·∫°o:', newPost.data);

    // L·∫•y th·ªëng k√™
    const analytics = await client.getAnalytics(7);
    console.log('Th·ªëng k√™ 7 ng√†y:', analytics.data);

  } catch (error) {
    console.error('L·ªói:', error.message);
  }
}

example();
```

### **üêç Python**

**C√†i ƒë·∫∑t:**
```bash
pip install requests
```

**V√≠ d·ª• s·ª≠ d·ª•ng:**
```python
import requests
import json

class CMSClient:
    def __init__(self, api_key, base_url='https://cms-one-mauve.vercel.app/api/v1'):
        self.api_key = api_key
        self.base_url = base_url
        self.headers = {
            'X-Api-Key': api_key,
            'Content-Type': 'application/json'
        }
    
    def _request(self, method, endpoint, data=None, params=None):
        url = f'{self.base_url}{endpoint}'
        
        kwargs = {
            'headers': self.headers,
            'params': params
        }
        
        if data:
            kwargs['json'] = data
            
        response = requests.request(method, url, **kwargs)
        
        if response.status_code >= 400:
            error_data = response.json() if response.content else {}
            raise Exception(f"API Error {response.status_code}: {error_data.get('error', 'Unknown error')}")
            
        return response.json()
    
    def get_posts(self, **params):
        """L·∫•y danh s√°ch b√†i vi·∫øt"""
        return self._request('GET', '/posts', params=params)
    
    def create_post(self, title, content, **kwargs):
        """T·∫°o b√†i vi·∫øt m·ªõi"""
        data = {
            'title': title,
            'content': content,
            **kwargs
        }
        return self._request('POST', '/posts', data=data)
    
    def get_post(self, post_id):
        """L·∫•y b√†i vi·∫øt theo ID"""
        return self._request('GET', f'/posts/{post_id}')
    
    def update_post(self, post_id, **data):
        """C·∫≠p nh·∫≠t b√†i vi·∫øt"""
        return self._request('PUT', f'/posts/{post_id}', data=data)
    
    def delete_post(self, post_id):
        """X√≥a b√†i vi·∫øt"""
        return self._request('DELETE', f'/posts/{post_id}')
    
    def get_tags(self):
        """L·∫•y danh s√°ch tags"""
        return self._request('GET', '/tags')
    
    def create_tag(self, name, **kwargs):
        """T·∫°o tag m·ªõi"""
        data = {
            'name': name,
            **kwargs
        }
        return self._request('POST', '/tags', data=data)
    
    def get_analytics(self, days=30):
        """L·∫•y th·ªëng k√™"""
        return self._request('GET', '/analytics', params={'days': days})

# S·ª≠ d·ª•ng
if __name__ == '__main__':
    client = CMSClient('your_api_key_here')
    
    try:
        # L·∫•y danh s√°ch b√†i vi·∫øt
        posts = client.get_posts(status='published', limit=5)
        print(f"T√¨m th·∫•y {posts['total']} b√†i vi·∫øt")
        
        # T·∫°o b√†i vi·∫øt m·ªõi
        new_post = client.create_post(
            title='B√†i vi·∫øt t·ª´ Python',
            content='N·ªôi dung b√†i vi·∫øt ƒë∆∞·ª£c t·∫°o t·ª´ Python',
            status='published'
        )
        print(f"ƒê√£ t·∫°o b√†i vi·∫øt ID: {new_post['data']['id']}")
        
        # L·∫•y th·ªëng k√™
        analytics = client.get_analytics(7)
        print(f"T·ªïng l∆∞·ª£t xem 7 ng√†y: {analytics['data']['totalViews']}")
        
    except Exception as e:
        print(f"L·ªói: {e}")
```

### **üåê PHP**

**V√≠ d·ª• s·ª≠ d·ª•ng:**
```php
<?php

class CMSClient {
    private $apiKey;
    private $baseUrl;
    
    public function __construct($apiKey, $baseUrl = 'https://cms-one-mauve.vercel.app/api/v1') {
        $this->apiKey = $apiKey;
        $this->baseUrl = $baseUrl;
    }
    
    private function request($method, $endpoint, $data = null) {
        $url = $this->baseUrl . $endpoint;
        
        $headers = [
            'X-Api-Key: ' . $this->apiKey,
            'Content-Type: application/json'
        ];
        
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $method);
        
        if ($data && in_array($method, ['POST', 'PUT', 'PATCH'])) {
            curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
        }
        
        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);
        
        $responseData = json_decode($response, true);
        
        if ($httpCode >= 400) {
            throw new Exception($responseData['error'] ?? "HTTP Error $httpCode");
        }
        
        return $responseData;
    }
    
    public function getPosts($params = []) {
        $endpoint = '/posts';
        if (!empty($params)) {
            $endpoint .= '?' . http_build_query($params);
        }
        return $this->request('GET', $endpoint);
    }
    
    public function createPost($title, $content, $additionalData = []) {
        $data = array_merge([
            'title' => $title,
            'content' => $content
        ], $additionalData);
        
        return $this->request('POST', '/posts', $data);
    }
    
    public function getPost($id) {
        return $this->request('GET', "/posts/$id");
    }
    
    public function updatePost($id, $data) {
        return $this->request('PUT', "/posts/$id", $data);
    }
    
    public function deletePost($id) {
        return $this->request('DELETE', "/posts/$id");
    }
    
    public function getTags() {
        return $this->request('GET', '/tags');
    }
    
    public function createTag($name, $additionalData = []) {
        $data = array_merge(['name' => $name], $additionalData);
        return $this->request('POST', '/tags', $data);
    }
    
    public function getAnalytics($days = 30) {
        return $this->request('GET', "/analytics?days=$days");
    }
}

// S·ª≠ d·ª•ng
try {
    $client = new CMSClient('your_api_key_here');
    
    // L·∫•y danh s√°ch b√†i vi·∫øt
    $posts = $client->getPosts(['status' => 'published', 'limit' => 5]);
    echo "T√¨m th·∫•y " . $posts['total'] . " b√†i vi·∫øt\n";
    
    // T·∫°o b√†i vi·∫øt m·ªõi
    $newPost = $client->createPost(
        'B√†i vi·∫øt t·ª´ PHP',
        'N·ªôi dung b√†i vi·∫øt ƒë∆∞·ª£c t·∫°o t·ª´ PHP',
        ['status' => 'published']
    );
    echo "ƒê√£ t·∫°o b√†i vi·∫øt ID: " . $newPost['data']['id'] . "\n";
    
    // L·∫•y th·ªëng k√™
    $analytics = $client->getAnalytics(7);
    echo "T·ªïng l∆∞·ª£t xem 7 ng√†y: " . $analytics['data']['totalViews'] . "\n";
    
} catch (Exception $e) {
    echo "L·ªói: " . $e->getMessage() . "\n";
}

?>
```

### **üíé Ruby**

**C√†i ƒë·∫∑t:**
```bash
gem install httparty
```

**V√≠ d·ª• s·ª≠ d·ª•ng:**
```ruby
require 'httparty'

class CMSClient
  include HTTParty
  
  def initialize(api_key, base_uri = 'https://cms-one-mauve.vercel.app/api/v1')
    @headers = {
      'X-Api-Key' => api_key,
      'Content-Type' => 'application/json'
    }
    self.class.base_uri base_uri
  end
  
  def get_posts(**params)
    response = self.class.get('/posts', headers: @headers, query: params)
    handle_response(response)
  end
  
  def create_post(title, content, **additional_data)
    data = { title: title, content: content }.merge(additional_data)
    response = self.class.post('/posts', headers: @headers, body: data.to_json)
    handle_response(response)
  end
  
  def get_post(id)
    response = self.class.get("/posts/#{id}", headers: @headers)
    handle_response(response)
  end
  
  def update_post(id, **data)
    response = self.class.put("/posts/#{id}", headers: @headers, body: data.to_json)
    handle_response(response)
  end
  
  def delete_post(id)
    response = self.class.delete("/posts/#{id}", headers: @headers)
    handle_response(response)
  end
  
  def get_tags
    response = self.class.get('/tags', headers: @headers)
    handle_response(response)
  end
  
  def create_tag(name, **additional_data)
    data = { name: name }.merge(additional_data)
    response = self.class.post('/tags', headers: @headers, body: data.to_json)
    handle_response(response)
  end
  
  def get_analytics(days = 30)
    response = self.class.get('/analytics', headers: @headers, query: { days: days })
    handle_response(response)
  end
  
  private
  
  def handle_response(response)
    if response.success?
      response.parsed_response
    else
      error_message = response.parsed_response['error'] rescue "HTTP Error #{response.code}"
      raise "API Error: #{error_message}"
    end
  end
end

# S·ª≠ d·ª•ng
begin
  client = CMSClient.new('your_api_key_here')
  
  # L·∫•y danh s√°ch b√†i vi·∫øt
  posts = client.get_posts(status: 'published', limit: 5)
  puts "T√¨m th·∫•y #{posts['total']} b√†i vi·∫øt"
  
  # T·∫°o b√†i vi·∫øt m·ªõi
  new_post = client.create_post(
    'B√†i vi·∫øt t·ª´ Ruby',
    'N·ªôi dung b√†i vi·∫øt ƒë∆∞·ª£c t·∫°o t·ª´ Ruby',
    status: 'published'
  )
  puts "ƒê√£ t·∫°o b√†i vi·∫øt ID: #{new_post['data']['id']}"
  
  # L·∫•y th·ªëng k√™
  analytics = client.get_analytics(7)
  puts "T·ªïng l∆∞·ª£t xem 7 ng√†y: #{analytics['data']['totalViews']}"
  
rescue => e
  puts "L·ªói: #{e.message}"
end
```

---

## üìä **ƒê·ªãnh d·∫°ng Response**

### **‚úÖ Response th√†nh c√¥ng:**
```json
{
  "success": true,
  "data": {
    "id": "abc123",
    "title": "Ti√™u ƒë·ªÅ b√†i vi·∫øt",
    "content": "N·ªôi dung...",
    "status": "published",
    "organizationId": "org_123",
    "createdAt": "2025-07-17T10:30:00Z",
    "updatedAt": "2025-07-17T10:30:00Z"
  },
  "total": 1
}
```

### **‚ùå Response l·ªói:**
```json
{
  "success": false,
  "error": "M√¥ t·∫£ l·ªói c·ª• th·ªÉ"
}
```

---

## üîß **Query Parameters**

### **Posts API:**
```
?status=published        # L·ªçc theo tr·∫°ng th√°i
?categoryId=123         # L·ªçc theo danh m·ª•c
?authorId=456           # L·ªçc theo t√°c gi·∫£
?limit=10               # Gi·ªõi h·∫°n s·ªë k·∫øt qu·∫£
?search=keyword         # T√¨m ki·∫øm theo t·ª´ kh√≥a
```

### **Analytics API:**
```
?days=30                # Th·ªëng k√™ trong 30 ng√†y qua
```

**V√≠ d·ª• s·ª≠ d·ª•ng:**
```
GET /api/v1/posts?status=published&limit=5
GET /api/v1/analytics?days=7
```

---

## ‚ö° **Quick Test v·ªõi cURL**

### **Test k·∫øt n·ªëi:**
```bash
curl -H "X-Api-Key: your_api_key_here" \
     https://cms-one-mauve.vercel.app/api/v1/posts
```

### **T·∫°o b√†i vi·∫øt m·ªõi:**
```bash
curl -X POST \
     -H "X-Api-Key: your_api_key_here" \
     -H "Content-Type: application/json" \
     -d '{
       "title": "Test Post",
       "content": "Test content",
       "status": "published"
     }' \
     https://cms-one-mauve.vercel.app/api/v1/posts
```

### **L·∫•y th·ªëng k√™:**
```bash
curl -H "X-Api-Key: your_api_key_here" \
     https://cms-one-mauve.vercel.app/api/v1/analytics?days=7
```

---

## üö® **HTTP Status Codes**

| Code | √ù nghƒ©a | M√¥ t·∫£ |
|------|---------|-------|
| `200` | OK | Th√†nh c√¥ng |
| `201` | Created | T·∫°o m·ªõi th√†nh c√¥ng |
| `400` | Bad Request | D·ªØ li·ªáu ƒë·∫ßu v√†o kh√¥ng h·ª£p l·ªá |
| `401` | Unauthorized | API key kh√¥ng h·ª£p l·ªá |
| `403` | Forbidden | Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p |
| `404` | Not Found | Kh√¥ng t√¨m th·∫•y resource |
| `429` | Too Many Requests | V∆∞·ª£t qu√° rate limit |
| `500` | Internal Server Error | L·ªói server |

---

## ÔøΩ **B·∫£o m·∫≠t & Best Practices**

### **üîë API Key Security:**
- ‚úÖ **L∆∞u tr·ªØ an to√†n:** S·ª≠ d·ª•ng environment variables
- ‚úÖ **Kh√¥ng commit:** Kh√¥ng ƒë∆∞a API key v√†o code repository
- ‚úÖ **HTTPS only:** Ch·ªâ s·ª≠ d·ª•ng HTTPS trong production
- ‚úÖ **Rotate keys:** Th∆∞·ªùng xuy√™n ƒë·ªïi API key

### **‚ö° Performance:**
- ‚úÖ **Rate limiting:** T√¥n tr·ªçng gi·ªõi h·∫°n request/ph√∫t
- ‚úÖ **Pagination:** S·ª≠ d·ª•ng limit cho datasets l·ªõn
- ‚úÖ **Error handling:** X·ª≠ l√Ω l·ªói m·ªôt c√°ch graceful
- ‚úÖ **Retry logic:** Implement retry cho network failures

### **üìù Data Handling:**
- ‚úÖ **Validate input:** Lu√¥n validate d·ªØ li·ªáu tr∆∞·ªõc khi g·ª≠i
- ‚úÖ **Check success:** Ki·ªÉm tra field `success` trong response
- ‚úÖ **Handle errors:** X·ª≠ l√Ω c√°c error codes appropriately

---

## üìû **Support & Resources**

### **üìö Documentation:**
- API Reference: `/docs/api`
- Examples: `/docs/examples`
- SDKs: Available cho major languages

### **üõ†Ô∏è Development:**
- **Environment:** Sandbox environment available
- **Testing:** Use provided test API keys
- **Rate Limits:** 1000 requests/hour (adjustable)

### **üÜò Help:**
- **Status Page:** Check API status
- **Support Email:** api-support@cms-one-mauve.vercel.app
- **Discord/Slack:** Developer community

---

## üåü **T√≠nh nƒÉng n·ªïi b·∫≠t**

- ‚úÖ **Multi-tenant:** D·ªØ li·ªáu t·ª± ƒë·ªông ph√¢n t√°ch theo organization
- ‚úÖ **Real-time:** WebSocket support cho real-time updates
- ‚úÖ **File Upload:** H·ªó tr·ª£ upload images, documents
- ‚úÖ **Search:** Full-text search capabilities  
- ‚úÖ **Analytics:** Built-in analytics tracking
- ‚úÖ **Webhooks:** Event-driven notifications
- ‚úÖ **SDKs:** Official libraries cho popular languages

**üöÄ S·∫µn s√†ng t√≠ch h·ª£p ngay h√¥m nay!**
